@typeparam TValue
@namespace BlazorUI.Components.Select
@using BlazorUI.Primitives.Select
@attribute [CascadingTypeParameter(nameof(TValue))]

@* Styled SelectTrigger wrapper around SelectTrigger primitive *@
<BlazorUI.Primitives.Select.SelectTrigger TValue="TValue"
                                               class="@CssClass"
                                               @attributes="AdditionalAttributes">
    @ChildContent
    <svg class="ms-2 h-4 w-4 opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
</BlazorUI.Primitives.Select.SelectTrigger>

@code {
    /// <summary>
    /// Cascading parameter to infer TValue from parent Select context.
    /// </summary>
    [CascadingParameter]
    private SelectContext<TValue>? Context { get; set; }

    /// <summary>
    /// Gets or sets additional CSS classes to apply to the trigger button.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Gets or sets the content to be rendered inside the trigger button.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Gets or sets additional attributes to be applied to the trigger button.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    /// <summary>
    /// Gets the computed CSS classes for the trigger button.
    /// </summary>
    private string CssClass => ClassNames.cn(
        "flex h-9 w-full items-center justify-between rounded-md border border-input",
        "bg-background pl-3 px-2 py-2 text-sm ring-offset-background",
        "placeholder:text-muted-foreground",
        "transition-[color,box-shadow]",
        "hover:bg-accent hover:text-accent-foreground",
        "focus:outline-none focus:ring-2 focus:ring-ring/50",
        "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/50",
        "disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-background",
        "data-[state=open]:ring-2 data-[state=open]:ring-ring/50",
        "[&[aria-expanded=true]]:ring-2 [&[aria-expanded=true]]:ring-ring/50",
        "[&[aria-expanded=true]]:hover:bg-background",
        Class
    );
}
