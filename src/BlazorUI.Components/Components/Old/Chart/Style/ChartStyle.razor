@namespace BlazorUI.Components.Old.Chart

@* ChartStyle is a container component that collects style configurations from child components *@
@code {
    /// <summary>
    /// Gets or sets the child content containing style component declarations.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    
    /// <summary>
    /// Gets or sets the parent chart component.
    /// </summary>
    [CascadingParameter]
    public IChartStyleContainer? ParentChart { get; set; }
    
    internal LineStyleConfig? LineStyle { get; set; }
    internal AreaStyleConfig? AreaStyle { get; set; }
    internal PointStyleConfig? PointStyle { get; set; }
    internal BarStyleConfig? BarStyle { get; set; }
    
    protected override void OnInitialized()
    {
        ParentChart?.RegisterStyle(this);
    }
    
    /// <summary>
    /// Registers a line style configuration.
    /// </summary>
    internal void RegisterLineStyle(LineStyleConfig config)
    {
        LineStyle = config;
    }
    
    /// <summary>
    /// Registers an area style configuration.
    /// </summary>
    internal void RegisterAreaStyle(AreaStyleConfig config)
    {
        AreaStyle = config;
    }
    
    /// <summary>
    /// Registers a point style configuration.
    /// </summary>
    internal void RegisterPointStyle(PointStyleConfig config)
    {
        PointStyle = config;
    }
    
    /// <summary>
    /// Registers a bar style configuration.
    /// </summary>
    internal void RegisterBarStyle(BarStyleConfig config)
    {
        BarStyle = config;
    }
}

@if (ChildContent != null)
{
    <CascadingValue Value="this" IsFixed="true">
        @ChildContent
    </CascadingValue>
}
