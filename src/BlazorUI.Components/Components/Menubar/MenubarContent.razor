@namespace BlazorUI.Components.Menubar
@using BlazorUI.Primitives.Menubar
@using BlazorUI.Primitives.Services

@* Styled MenubarContent - wrapper with shadcn Tailwind classes *@
<BlazorUI.Primitives.Menubar.MenubarContent class="@CssClass"
                                              CloseOnEscape="@CloseOnEscape"
                                              CloseOnClickOutside="@CloseOnClickOutside"
                                              Side="@Side"
                                              Align="@Align"
                                              Offset="@Offset"
                                              Loop="@Loop"
                                              ZIndex="@ZIndex">
    <div class="p-1">
        @ChildContent
    </div>
</BlazorUI.Primitives.Menubar.MenubarContent>

@code {
    /// <summary>
    /// The content to render inside the menu.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the content container.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Whether pressing Escape should close the menu.
    /// </summary>
    [Parameter]
    public bool CloseOnEscape { get; set; } = true;

    /// <summary>
    /// Whether clicking outside should close the menu.
    /// </summary>
    [Parameter]
    public bool CloseOnClickOutside { get; set; } = true;

    /// <summary>
    /// Preferred side for positioning.
    /// </summary>
    [Parameter]
    public PopoverSide Side { get; set; } = PopoverSide.Bottom;

    /// <summary>
    /// Alignment relative to trigger.
    /// </summary>
    [Parameter]
    public PopoverAlign Align { get; set; } = PopoverAlign.Start;

    /// <summary>
    /// Offset distance from the trigger in pixels.
    /// </summary>
    [Parameter]
    public int Offset { get; set; } = 4;

    /// <summary>
    /// Whether to enable keyboard loop navigation.
    /// </summary>
    [Parameter]
    public bool Loop { get; set; } = true;

    /// <summary>
    /// Z-index for the menu content.
    /// </summary>
    [Parameter]
    public int ZIndex { get; set; } = 50;

    private string CssClass
    {
        get
        {
            var baseClasses = "z-50 min-w-[12rem] no-focus-ring overflow-hidden rounded-md border bg-popover " +
                            "text-popover-foreground shadow-md " +
                            "data-[state=open]:animate-in data-[state=closed]:animate-out " +
                            "data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 " +
                            "data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95";
            return string.IsNullOrWhiteSpace(Class) ? baseClasses : $"{baseClasses} {Class}";
        }
    }
}
