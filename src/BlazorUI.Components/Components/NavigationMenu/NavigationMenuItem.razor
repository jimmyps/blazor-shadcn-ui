@namespace BlazorUI.Components.NavigationMenu
<<<<<<< HEAD

@* NavigationMenuItem - styled item container *@
<BlazorUI.Primitives.NavigationMenu.NavigationMenuItem Value="@Value" class="relative" @attributes="AdditionalAttributes">
    @ChildContent
</BlazorUI.Primitives.NavigationMenu.NavigationMenuItem>

@code {
    /// <summary>
    /// The unique value for this item.
    /// </summary>
    [Parameter]
    public string Value { get; set; } = string.Empty;

    /// <summary>
    /// The child content to render within the item.
=======
@using BlazorUI.Components.Utilities

@*
    Navigation Menu Item - a single item in the navigation menu.
    Can contain a trigger (for dropdowns) or a link.
*@

<li class="@CssClass">
    <CascadingValue Value="@this" IsFixed="true">
        @ChildContent
    </CascadingValue>
</li>

@code {
    private NavigationMenuTrigger? _trigger;
    private NavigationMenuContent? _content;

    /// <summary>
    /// Reference to the parent navigation menu.
    /// </summary>
    [CascadingParameter]
    public NavigationMenu? Menu { get; set; }

    /// <summary>
    /// The content of the menu item.
>>>>>>> 8835bfed9859e4bf8349954ac05f732fe9ffddcf
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
<<<<<<< HEAD
    /// Additional attributes to apply.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }
=======
    /// Unique identifier for this menu item.
    /// </summary>
    [Parameter]
    public string? Value { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the item.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Gets whether this item is currently open.
    /// </summary>
    internal bool IsOpen
    {
        get => Menu?.ActiveItem == Value;
        set
        {
            if (Menu != null)
            {
                Menu.ActiveItem = value ? Value : null;
            }
        }
    }

    /// <summary>
    /// Registers the trigger component for focus management.
    /// </summary>
    internal void RegisterTrigger(NavigationMenuTrigger trigger)
    {
        _trigger = trigger;
    }

    /// <summary>
    /// Registers the content component for focus management.
    /// </summary>
    internal void RegisterContent(NavigationMenuContent content)
    {
        _content = content;
    }

    /// <summary>
    /// Focuses the trigger element.
    /// </summary>
    internal async Task FocusTriggerAsync()
    {
        if (_trigger != null)
        {
            await _trigger.FocusAsync();
        }
    }

    /// <summary>
    /// Focuses the first item in the content.
    /// </summary>
    internal async Task FocusFirstContentItemAsync()
    {
        if (_content != null)
        {
            await _content.FocusFirstItemAsync();
        }
    }

    /// <summary>
    /// Toggles the open state of this menu item.
    /// </summary>
    internal void Toggle()
    {
        IsOpen = !IsOpen;
    }

    /// <summary>
    /// Starts a timer to close the menu after a short delay.
    /// Delegates to the parent menu's shared timer.
    /// </summary>
    internal void StartCloseTimer()
    {
        Menu?.StartCloseTimer();
    }

    /// <summary>
    /// Cancels any pending close timer.
    /// Delegates to the parent menu's shared timer.
    /// </summary>
    internal void CancelCloseTimer()
    {
        Menu?.CancelCloseTimer();
    }

    /// <summary>
    /// Gets the computed CSS classes for the item.
    /// </summary>
    private string CssClass => ClassNames.cn(
        "relative",
        IsOpen ? "z-50" : null,
        Class
    );
>>>>>>> 8835bfed9859e4bf8349954ac05f732fe9ffddcf
}
