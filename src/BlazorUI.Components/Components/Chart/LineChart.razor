@namespace BlazorUI.Components.Chart
@typeparam TData
@inherits ComponentBase

<CascadingValue Value="_context" IsFixed="true">
    <div class="@ContainerClass">
        @ChildContent
    </div>
</CascadingValue>

@code {
    [Parameter, EditorRequired] public IEnumerable<TData> Data { get; set; } = Enumerable.Empty<TData>();
    [Parameter] public Padding Padding { get; set; } = new(32, 16, 24, 16);
    [Parameter] public bool ContainLabel { get; set; } = true;
    [Parameter] public string? Id { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    
    private ChartContext<TData> _context = new("line");
    
    protected override void OnInitialized()
    {
        _context.EnsureImplicitPrimitives(TooltipMode.Axis);
    }
    
    public Task RefreshAsync() => Task.CompletedTask;
    
    private string ContainerClass => string.IsNullOrWhiteSpace(Class) ? "chart-root" : $"chart-root {Class}";
}
