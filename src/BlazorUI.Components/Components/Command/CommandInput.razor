@namespace BlazorUI.Components.Command
@using BlazorUI.Primitives.Combobox

<div class="@CssClass" data-command-input-wrapper>
    <svg xmlns="http://www.w3.org/2000/svg"
         width="24"
         height="24"
         viewBox="0 0 24 24"
         fill="none"
         stroke="currentColor"
         stroke-width="2"
         stroke-linecap="round"
         stroke-linejoin="round"
         class="mr-2 h-4 w-4 shrink-0 opacity-50">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
    </svg>
    <ComboboxInput placeholder="@Placeholder"
                   disabled="@Disabled"
                   AutoFocus="@AutoFocus"
                   SearchInterval="@SearchInterval"
                   class="flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 ml-2" />
</div>

@code {
    /// <summary>
    /// Gets or sets additional CSS classes to apply to the input container.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Gets or sets the placeholder text for the input.
    /// </summary>
    [Parameter]
    public string Placeholder { get; set; } = "Type a command or search...";

    /// <summary>
    /// Gets or sets whether the input is disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    /// <summary>
    /// Gets or sets whether the input should auto-focus when rendered.
    /// </summary>
    [Parameter]
    public bool AutoFocus { get; set; }

    /// <summary>
    /// Gets or sets the debounce interval in milliseconds before triggering search.
    /// Default is 0 (no debouncing). Set to 150-300ms for better performance with large datasets.
    /// </summary>
    [Parameter]
    public int SearchInterval { get; set; } = 0;

    /// <summary>
    /// Gets the computed CSS classes for the input container.
    /// </summary>
    private string CssClass
    {
        get
        {
            var baseClasses = "flex items-center border-b border-border px-3";
            return string.IsNullOrWhiteSpace(Class) ? baseClasses : $"{baseClasses} {Class}";
        }
    }
}
