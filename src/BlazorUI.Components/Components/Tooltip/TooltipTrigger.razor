@namespace BlazorUI.Components.Tooltip
@using BlazorUI.Components.Utilities
@using BlazorUI.Primitives.Tooltip

@* Styled TooltipTrigger - thin wrapper with contents class for layout *@
@if (AsChild)
{
    <BlazorUI.Primitives.Tooltip.TooltipTrigger AsChild="true"
                                                      Focusable="@Focusable"
                                                      OnMouseEnter="@OnMouseEnter"
                                                      OnMouseLeave="@OnMouseLeave"
                                                      @attributes="AdditionalAttributes">
        @ChildContent
    </BlazorUI.Primitives.Tooltip.TooltipTrigger>
}
else
{
    <span class="@WrapperClass">
        <BlazorUI.Primitives.Tooltip.TooltipTrigger Focusable="@Focusable"
                                                          OnMouseEnter="@OnMouseEnter"
                                                          OnMouseLeave="@OnMouseLeave"
                                                          @attributes="AdditionalAttributes">
            @ChildContent
        </BlazorUI.Primitives.Tooltip.TooltipTrigger>
    </span>
}

@code {
    /// <summary>
    /// The content to display inside the trigger.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the wrapper.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// When true, the trigger does not render its own span element.
    /// Instead, it passes trigger behavior via TriggerContext to child components.
    /// Use this when you want a custom component to act as the trigger.
    /// </summary>
    [Parameter]
    public bool AsChild { get; set; } = false;

    /// <summary>
    /// Whether the trigger should be keyboard focusable.
    /// Default is true. Set to false if child content is already focusable.
    /// </summary>
    [Parameter]
    public bool Focusable { get; set; } = true;

    /// <summary>
    /// Custom mouse enter handler.
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnMouseEnter { get; set; }

    /// <summary>
    /// Custom mouse leave handler.
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnMouseLeave { get; set; }

    /// <summary>
    /// Additional attributes to apply to the trigger element.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string WrapperClass => ClassNames.cn("contents", Class);
}
