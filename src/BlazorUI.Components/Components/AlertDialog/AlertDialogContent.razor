@namespace BlazorUI.Components.AlertDialog
@using BlazorUI.Components.Utilities
@using BlazorUI.Primitives.Dialog

@*
    AlertDialog content with alert-specific styling.
*@

<DialogPortal>
    <DialogOverlay class="@GetOverlayClass()" />

    <BlazorUI.Primitives.Dialog.DialogContent
        class="@GetClassNames()"
        CloseOnEscape="@CloseOnEscape"
        TrapFocus="true"
        LockScroll="true"
        @attributes="AdditionalAttributes">
        @ChildContent
    </BlazorUI.Primitives.Dialog.DialogContent>
</DialogPortal>

@code {
    /// <summary>
    /// The content to render inside the alert dialog.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the alert dialog content.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Whether the alert dialog can be closed with the Escape key.
    /// Default is true for accessibility.
    /// </summary>
    [Parameter]
    public bool CloseOnEscape { get; set; } = true;

    /// <summary>
    /// Additional attributes to apply to the alert dialog content element.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public IDictionary<string, object>? AdditionalAttributes { get; set; }

    private string GetOverlayClass() => ClassNames.cn(
        "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out",
        "data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"
    );

    private string GetClassNames() => ClassNames.cn(
        // Base positioning and sizing
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200",
        // Animation states
        "data-[state=open]:animate-in data-[state=closed]:animate-out",
        "data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
        "data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",
        "data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]",
        "data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",
        // Responsive
        "sm:rounded-lg",
        // Custom classes
        Class
    );
}
