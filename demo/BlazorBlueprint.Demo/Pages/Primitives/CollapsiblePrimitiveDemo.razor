@page "/primitives/collapsible"
@using BlazorBlueprint.Primitives.Collapsible
@using BlazorBlueprint.Components.Kbd

<PageTitle>Collapsible Primitive - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Collapsible Primitive</h1>
            <p class="text-xl text-muted-foreground">
                Unstyled, accessible primitive component for building custom collapsibles.
            </p>
        </div>
    </div>

    <div class="space-y-6">
        <!-- AsChild Pattern -->
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">AsChild Pattern</h2>
                <p class="text-muted-foreground">
                    Use AsChild to compose triggers with your own styled elements.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Without AsChild -->
                <div class="space-y-3 p-4 border rounded-lg">
                    <h3 class="text-lg font-medium">Without AsChild</h3>
                    <p class="text-sm text-muted-foreground">
                        CollapsibleTrigger renders its own button element.
                    </p>
                    <Collapsible>
                        <CollapsibleTrigger class="h-9 px-3 py-2 border rounded text-sm cursor-pointer">
                            Click to toggle
                        </CollapsibleTrigger>
                        <CollapsibleContent class="mt-2">
                            Without AsChild - content controlled by the primitive.
                        </CollapsibleContent>
                    </Collapsible>
                </div>

                <!-- With AsChild -->
                <div class="space-y-3 p-4 border rounded-lg">
                    <h3 class="text-lg font-medium">With AsChild</h3>
                    <p class="text-sm text-muted-foreground">
                        Button receives click behavior via TriggerContext.
                    </p>
                    <Collapsible>
                        <CollapsibleTrigger AsChild>
                            <Button Variant="ButtonVariant.Outline" Size="ButtonSize.Small">
                                Click to toggle
                                <LucideIcon Name="chevron-down" Size="16" Class="ml-2" />
                            </Button>
                        </CollapsibleTrigger>
                        <CollapsibleContent class="mt-2">
                            With AsChild - Button handles the trigger behavior.
                        </CollapsibleContent>
                    </Collapsible>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Basic Headless Primitive</h2>
                <p class="text-muted-foreground">
                    The primitive provides behavior and accessibility without styling.
                </p>
            </div>

            <div class="rounded-lg border bg-card p-6 max-w-md">
                <Collapsible>
                    <CollapsibleTrigger class="cursor-pointer">
                        Click to toggle (unstyled primitive)
                    </CollapsibleTrigger>
                    <CollapsibleContent class="mt-2">
                        This content is controlled by the headless primitive. Style it however you want!
                    </CollapsibleContent>
                </Collapsible>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Controlled State</h2>
                <p class="text-muted-foreground">
                    Control the primitive state externally.
                </p>
            </div>

            <div class="space-y-4">
                <div class="flex gap-2">
                    <button @onclick="@(() => isPrimitiveOpen = true)"
                            class="px-3 py-2 border rounded text-sm">
                        Open
                    </button>
                    <button @onclick="@(() => isPrimitiveOpen = false)"
                            class="px-3 py-2 border rounded text-sm">
                        Close
                    </button>
                </div>

                <div class="rounded-lg border bg-card p-6 max-w-md">
                    <Collapsible @bind-Open="isPrimitiveOpen">
                        <CollapsibleTrigger class="cursor-pointer">
                            Controlled Primitive (State: @(isPrimitiveOpen ? "Open" : "Closed"))
                        </CollapsibleTrigger>
                        <CollapsibleContent class="mt-2">
                            External buttons control this primitive's state.
                        </CollapsibleContent>
                    </Collapsible>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Accessibility Features</h2>
                <p class="text-muted-foreground">
                    Built-in accessibility features following WAI-ARIA design patterns.
                </p>
            </div>

            <div class="rounded-lg border p-6 space-y-3 bg-muted/50">
                <div>
                    <h3 class="font-semibold mb-2">ARIA Attributes</h3>
                    <ul class="space-y-2 text-sm text-muted-foreground">
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span><code class="text-xs bg-muted px-1 py-0.5 rounded">aria-expanded</code> automatically applied to trigger</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span><code class="text-xs bg-muted px-1 py-0.5 rounded">data-state</code> attribute for CSS styling (open|closed)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span><code class="text-xs bg-muted px-1 py-0.5 rounded">role="region"</code> on content with proper aria-hidden</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Focus management with visible focus indicators</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Proper disabled attribute and behavior</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Keyboard Shortcuts</h2>
                <p class="text-muted-foreground">
                    Navigate and interact with collapsibles using keyboard.
                </p>
            </div>

            <div class="rounded-lg border p-6 space-y-3 bg-muted/50">
                <div class="grid gap-3">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Navigate to trigger</span>
                        <Kbd>Tab</Kbd>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Toggle collapsible</span>
                        <span class="flex gap-1">
                            <Kbd>Space</Kbd>
                            <Kbd>Enter</Kbd>
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">API Reference</h2>
                <p class="text-muted-foreground">
                    Component properties and parameters.
                </p>
            </div>

            <div class="space-y-4">
                <div class="rounded-lg border p-4">
                    <h3 class="font-semibold mb-3">Collapsible</h3>
                    <div class="space-y-3 text-sm">
                        <div>
                            <code class="text-xs bg-muted px-1 py-0.5 rounded">Open</code>
                            <p class="text-muted-foreground mt-1">
                                <strong>Type:</strong> <code>bool</code><br/>
                                <strong>Default:</strong> <code>false</code><br/>
                                Controls whether the collapsible is expanded. Supports two-way binding with @@bind-Open.
                            </p>
                        </div>
                        <div>
                            <code class="text-xs bg-muted px-1 py-0.5 rounded">OpenChanged</code>
                            <p class="text-muted-foreground mt-1">
                                <strong>Type:</strong> <code>EventCallback&lt;bool&gt;</code><br/>
                                Callback invoked when the open state changes.
                            </p>
                        </div>
                        <div>
                            <code class="text-xs bg-muted px-1 py-0.5 rounded">Disabled</code>
                            <p class="text-muted-foreground mt-1">
                                <strong>Type:</strong> <code>bool</code><br/>
                                <strong>Default:</strong> <code>false</code><br/>
                                Prevents toggling when true.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="rounded-lg border p-4">
                    <h3 class="font-semibold mb-3">CollapsibleTrigger</h3>
                    <div class="space-y-3 text-sm">
                        <div>
                            <code class="text-xs bg-muted px-1 py-0.5 rounded">ChildContent</code>
                            <p class="text-muted-foreground mt-1">
                                <strong>Type:</strong> <code>RenderFragment?</code><br/>
                                Content rendered inside the trigger button.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="rounded-lg border p-4">
                    <h3 class="font-semibold mb-3">CollapsibleContent</h3>
                    <div class="space-y-3 text-sm">
                        <div>
                            <code class="text-xs bg-muted px-1 py-0.5 rounded">ChildContent</code>
                            <p class="text-muted-foreground mt-1">
                                <strong>Type:</strong> <code>RenderFragment?</code><br/>
                                Content to be shown/hidden when collapsible is toggled.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">When to Use Primitives</h2>
                <p class="text-muted-foreground">
                    Choose between primitives and styled components based on your needs.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="rounded-lg border p-4 space-y-3">
                    <h3 class="font-semibold text-primary">Use Collapsible Primitive</h3>
                    <ul class="space-y-2 text-sm text-muted-foreground">
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Building a custom design system</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Need complete control over styling</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Want to apply your own CSS framework</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-600 dark:text-green-400">✓</span>
                            <span>Creating unique visual designs</span>
                        </li>
                    </ul>
                </div>

                <div class="rounded-lg border p-4 space-y-3">
                    <h3 class="font-semibold text-primary">Use Styled Component</h3>
                    <ul class="space-y-2 text-sm text-muted-foreground">
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 dark:text-blue-400">●</span>
                            <span>Want shadcn/ui design out of the box</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 dark:text-blue-400">●</span>
                            <span>Need quick implementation</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 dark:text-blue-400">●</span>
                            <span>Like the default styling</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 dark:text-blue-400">●</span>
                            <span>Prefer convention over configuration</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</div>

@code {
    private bool isPrimitiveOpen = false;
}
