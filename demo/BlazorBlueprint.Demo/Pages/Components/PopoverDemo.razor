@page "/components/popover"
@using BlazorBlueprint.Primitives.Services
@using BlazorBlueprint.Components.Popover

<PageTitle>Popover Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Popover Component</h1>
        <p class="text-xl text-muted-foreground">
            Styled Popover component with shadcn/ui design.
        </p>
        </div>
    </div>

    <div class="space-y-6">
    </div>

    <!-- AsChild Pattern -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">AsChild Pattern</h2>
        <p class="text-sm text-muted-foreground">
            Use AsChild to compose triggers with your own styled Button components.
        </p>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- Without AsChild -->
            <div class="space-y-3 p-4 border rounded-lg">
                <h3 class="text-lg font-medium">Without AsChild</h3>
                <p class="text-sm text-muted-foreground">
                    PopoverTrigger renders its own button with inline classes.
                </p>
                <Popover>
                    <PopoverTrigger class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                        Open Popover
                    </PopoverTrigger>
                    <PopoverContent>
                        <p class="text-sm">Basic popover content</p>
                    </PopoverContent>
                </Popover>
            </div>

            <!-- With AsChild -->
            <div class="space-y-3 p-4 border rounded-lg">
                <h3 class="text-lg font-medium">With AsChild</h3>
                <p class="text-sm text-muted-foreground">
                    Button receives trigger behavior via TriggerContext.
                </p>
                <Popover>
                    <PopoverTrigger AsChild>
                        <Button Variant="ButtonVariant.Outline">
                            <LucideIcon Name="settings" Size="16" />
                            Settings
                        </Button>
                    </PopoverTrigger>
                    <PopoverContent>
                        <div class="space-y-2">
                            <h4 class="font-medium">Settings</h4>
                            <p class="text-sm text-muted-foreground">Configure your preferences</p>
                        </div>
                    </PopoverContent>
                </Popover>
            </div>
        </div>
    </section>

    <section class="space-y-4">
        <h2 class="text-2xl font-semibold mb-4">Basic Popover</h2>
        <Popover>
            <PopoverTrigger AsChild>
                <Button Variant="ButtonVariant.Outline">Open Popover</Button>
            </PopoverTrigger>
            <PopoverContent>
                <div class="grid gap-4">
                    <div class="space-y-2">
                        <h4 class="font-medium leading-none">Dimensions</h4>
                        <p class="text-sm text-muted-foreground">
                            Set the dimensions for the layer.
                        </p>
                    </div>
                    <div class="grid gap-2">
                        <div class="grid grid-cols-3 items-center gap-4">
                            <label class="text-sm font-medium">Width</label>
                            <input class="col-span-2 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm" type="number" value="100" />
                        </div>
                        <div class="grid grid-cols-3 items-center gap-4">
                            <label class="text-sm font-medium">Height</label>
                            <input class="col-span-2 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm" type="number" value="100" />
                        </div>
                    </div>
                </div>
            </PopoverContent>
        </Popover>
    </section>

    <section>
        <h2 class="text-2xl font-semibold mb-4">Positioning</h2>
        <div class="flex flex-wrap gap-4">
            <Popover>
                <PopoverTrigger AsChild>
                    <Button Variant="ButtonVariant.Secondary">Top</Button>
                </PopoverTrigger>
                <PopoverContent Side="@PopoverSide.Top">
                    <p class="text-sm">Positioned on top</p>
                </PopoverContent>
            </Popover>

            <Popover>
                <PopoverTrigger AsChild>
                    <Button Variant="ButtonVariant.Secondary">Bottom</Button>
                </PopoverTrigger>
                <PopoverContent Side="@PopoverSide.Bottom">
                    <p class="text-sm">Positioned on bottom</p>
                </PopoverContent>
            </Popover>

            <Popover>
                <PopoverTrigger AsChild>
                    <Button Variant="ButtonVariant.Secondary">Left</Button>
                </PopoverTrigger>
                <PopoverContent Side="@PopoverSide.Left">
                    <p class="text-sm">Positioned on left</p>
                </PopoverContent>
            </Popover>

            <Popover>
                <PopoverTrigger AsChild>
                    <Button Variant="ButtonVariant.Secondary">Right</Button>
                </PopoverTrigger>
                <PopoverContent Side="@PopoverSide.Right">
                    <p class="text-sm">Positioned on right</p>
                </PopoverContent>
            </Popover>
        </div>
    </section>

    <section>
        <h2 class="text-2xl font-semibold mb-4">Controlled Popover</h2>
        <div class="flex items-center gap-4">
            <Popover @bind-Open="_isControlledOpen">
                <PopoverTrigger AsChild>
                    <Button>@(_isControlledOpen ? "Close" : "Open") Controlled</Button>
                </PopoverTrigger>
                <PopoverContent>
                    <div class="space-y-2">
                        <p class="text-sm">This popover is controlled externally.</p>
                        <p class="text-sm font-medium">State: @(_isControlledOpen ? "Open" : "Closed")</p>
                    </div>
                </PopoverContent>
            </Popover>
            <Button Variant="ButtonVariant.Outline" OnClick="() => _isControlledOpen = !_isControlledOpen">
                Toggle from Outside
            </Button>
        </div>
    </section>
</div>

@code {
    private bool _isControlledOpen = false;
}
