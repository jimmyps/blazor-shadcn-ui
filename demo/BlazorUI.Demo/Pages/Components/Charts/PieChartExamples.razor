@using BlazorUI.Components.Old.Chart
@using BlazorUI.Components.Card

<div class="space-y-8">
    <!-- Pie Chart - Default -->
    <div class="space-y-4">
        <div>
            <h3 class="text-lg font-semibold">Pie Chart</h3>
            <p class="text-sm text-muted-foreground">Showing visitor distribution by browser</p>
        </div>

        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Pie Chart</ChartPanelTitle>
                <ChartPanelDescription>January - June 2024</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@pieData"
                          LabelDataKey="Browser"
                          ValueDataKey="Visitors"
                          Height="300"
                          ShowExportButton="true"
                          ExportFileName="pie-chart" />
            </ChartPanelContent>
            <ChartPanelFooter>
                <div class="flex-col items-start gap-2 text-sm">
                    <div class="flex gap-2 font-medium leading-none">
                        Trending up by 5.2% this month <span class="ml-1">ðŸ“ˆ</span>
                    </div>
                    <div class="leading-none text-muted-foreground">
                        Showing total visitors for the last 6 months
                    </div>
                </div>
            </ChartPanelFooter>
        </ChartPanel>
    </div>

    <!-- Donut Chart -->
    <div class="space-y-4">
        <div>
            <h3 class="text-lg font-semibold">Donut</h3>
            <p class="text-sm text-muted-foreground">A donut chart with center content</p>
        </div>

        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Donut Chart</ChartPanelTitle>
                <ChartPanelDescription>January - June 2024</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@pieData"
                          LabelDataKey="Browser"
                          ValueDataKey="Visitors"
                          Height="300"
                          IsDonut="true">
                    <CenterContent>
                        <div class="flex flex-col items-center justify-center">
                            <div class="text-3xl font-bold">@totalVisitors</div>
                            <div class="text-sm text-muted-foreground">Visitors</div>
                        </div>
                    </CenterContent>
                </PieChart>
            </ChartPanelContent>
            <ChartPanelFooter>
                <div class="flex w-full items-start gap-2 text-sm">
                    <div class="grid gap-2">
                        <div class="flex items-center gap-2 font-medium leading-none">
                            Trending up by 5.2% this month <span class="ml-1">ðŸ“ˆ</span>
                        </div>
                        <div class="flex items-center gap-2 leading-none text-muted-foreground">
                            January - June 2024
                        </div>
                    </div>
                </div>
            </ChartPanelFooter>
        </ChartPanel>
    </div>

    <!-- Donut Chart - Label -->
    <div class="space-y-4">
        <div>
            <h3 class="text-lg font-semibold">Label</h3>
            <p class="text-sm text-muted-foreground">A donut chart with custom labels</p>
        </div>

        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Browser Usage</ChartPanelTitle>
                <ChartPanelDescription>Distribution of visitors by browser type</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@browserData"
                          LabelDataKey="Browser"
                          ValueDataKey="Share"
                          Height="300"
                          IsDonut="true">
                    <CenterContent>
                        <div class="flex flex-col items-center justify-center">
                            <div class="text-2xl font-bold">Browsers</div>
                            <div class="text-sm text-muted-foreground">Total Share</div>
                        </div>
                    </CenterContent>
                </PieChart>
            </ChartPanelContent>
            <ChartPanelFooter>
                <div class="flex gap-2 font-medium leading-none">
                    Chrome leads with 47.3% market share
                </div>
                <div class="leading-none text-muted-foreground">
                    Based on the last 6 months
                </div>
            </ChartPanelFooter>
        </ChartPanel>
    </div>

    <!-- Pie Chart - Legend -->
    <div class="space-y-4">
        <div>
            <h3 class="text-lg font-semibold">Legend</h3>
            <p class="text-sm text-muted-foreground">A pie chart with interactive legend</p>
        </div>

        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Market Share</ChartPanelTitle>
                <ChartPanelDescription>Product market share distribution</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@marketData"
                          LabelDataKey="Product"
                          ValueDataKey="Sales"
                          Height="300" />
            </ChartPanelContent>
            <ChartPanelFooter>
                <div class="flex w-full items-start gap-2 text-sm">
                    <div class="grid gap-2">
                        <div class="flex items-center gap-2 leading-none text-muted-foreground">
                            Showing product sales distribution
                        </div>
                    </div>
                </div>
            </ChartPanelFooter>
        </ChartPanel>
    </div>

    <!-- Donut Chart - Text -->
    <div class="space-y-4">
        <div>
            <h3 class="text-lg font-semibold">Text</h3>
            <p class="text-sm text-muted-foreground">A donut chart with text in the center</p>
        </div>

        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Completion Status</ChartPanelTitle>
                <ChartPanelDescription>Project completion overview</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@statusData"
                          LabelDataKey="Status"
                          ValueDataKey="Count"
                          Height="300"
                          IsDonut="true">
                    <CenterContent>
                        <div class="flex flex-col items-center justify-center">
                            <div class="text-4xl font-bold text-green-600">78%</div>
                            <div class="text-sm text-muted-foreground">Complete</div>
                        </div>
                    </CenterContent>
                </PieChart>
            </ChartPanelContent>
            <ChartPanelFooter>
                <div class="flex gap-2 font-medium leading-none">
                    On track for Q2 delivery <span class="ml-1">âœ“</span>
                </div>
                <div class="leading-none text-muted-foreground">
                    Updated daily
                </div>
            </ChartPanelFooter>
        </ChartPanel>
    </div>
</div>

@code {
        private readonly List<PieData> pieData = new()
        {
                new() { Browser = "Chrome", Visitors = 275 },
                new() { Browser = "Safari", Visitors = 200 },
                new() { Browser = "Firefox", Visitors = 187 },
                new() { Browser = "Edge", Visitors = 173 },
                new() { Browser = "Other", Visitors = 90 }
        };

        private readonly List<BrowserData> browserData = new()
        {
                new() { Browser = "Chrome", Share = 47.3m },
                new() { Browser = "Safari", Share = 22.1m },
                new() { Browser = "Firefox", Share = 16.4m },
                new() { Browser = "Edge", Share = 9.8m },
                new() { Browser = "Other", Share = 4.4m }
        };

        private readonly List<MarketData> marketData = new()
        {
                new() { Product = "Product A", Sales = 450 },
                new() { Product = "Product B", Sales = 380 },
                new() { Product = "Product C", Sales = 290 },
                new() { Product = "Product D", Sales = 210 },
                new() { Product = "Product E", Sales = 140 }
        };

        private readonly List<StatusData> statusData = new()
        {
                new() { Status = "Completed", Count = 78 },
                new() { Status = "In Progress", Count = 15 },
                new() { Status = "Pending", Count = 7 }
        };

        private int totalVisitors => pieData.Sum(x => x.Visitors);

        public class PieData
        {
                public string Browser { get; set; } = string.Empty;
                public int Visitors { get; set; }
        }

        public class BrowserData
        {
                public string Browser { get; set; } = string.Empty;
                public decimal Share { get; set; }
        }

        public class MarketData
        {
                public string Product { get; set; } = string.Empty;
                public int Sales { get; set; }
        }

        public class StatusData
        {
                public string Status { get; set; } = string.Empty;
                public int Count { get; set; }
        }
}
