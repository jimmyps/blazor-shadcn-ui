@page "/components/chart"
@using BlazorUI.Components.Chart
@using BlazorUI.Components.Card
@using BlazorUI.Components.Button

<PageTitle>Chart Components - BlazorUI</PageTitle>

<div class="space-y-8 max-w-6xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Chart Components</h1>
            <p class="text-xl text-muted-foreground">
                Beautiful, themeable charts for data visualization. Built with ECharts and Chart.js, with shadcn-inspired styling.
            </p>
        </div>
    </div>

    <!-- Basic Line Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Line Chart</h2>
            <p class="text-sm text-muted-foreground">
                A line chart for displaying trends over time or continuous data.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Monthly Sales</ChartPanelTitle>
                <ChartPanelDescription>Sales performance from January to June 2024</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <LineChart Data="@salesData" 
                          XAxisDataKey="Month"
                          YAxisDataKey="Sales"
                          Label="Sales ($)"
                          Height="300"
                          Curved="true" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Line Chart with Area Fill -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Area Chart</h2>
            <p class="text-sm text-muted-foreground">
                A line chart with filled area below the line.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Website Traffic</ChartPanelTitle>
                <ChartPanelDescription>Daily visitors over the past week</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <LineChart Data="@trafficData" 
                          XAxisDataKey="Day"
                          YAxisDataKey="Visitors"
                          Label="Visitors"
                          Height="300"
                          FillArea="true"
                          Curved="true"
                          LineColor="hsl(var(--chart-2))" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Multiple Options -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Customization Options</h2>
            <p class="text-sm text-muted-foreground">
                Charts can be customized with various options for colors, line styles, and animations.
            </p>
        </div>
        
        <div class="grid gap-4 md:grid-cols-2">
            <ChartPanel>
                <ChartPanelHeader>
                    <ChartPanelTitle>Straight Lines</ChartPanelTitle>
                    <ChartPanelDescription>Without curve smoothing</ChartPanelDescription>
                </ChartPanelHeader>
                <ChartPanelContent>
                    <LineChart Data="@salesData" 
                              XAxisDataKey="Month"
                              YAxisDataKey="Sales"
                              Label="Sales"
                              Height="250"
                              Curved="false"
                              LineColor="hsl(var(--chart-3))" />
                </ChartPanelContent>
            </ChartPanel>
            
            <ChartPanel>
                <ChartPanelHeader>
                    <ChartPanelTitle>No Data Points</ChartPanelTitle>
                    <ChartPanelDescription>Line without dots</ChartPanelDescription>
                </ChartPanelHeader>
                <ChartPanelContent>
                    <LineChart Data="@salesData" 
                              XAxisDataKey="Month"
                              YAxisDataKey="Sales"
                              Label="Sales"
                              Height="250"
                              ShowDots="false"
                              Curved="true"
                              LineColor="hsl(var(--chart-4))" />
                </ChartPanelContent>
            </ChartPanel>
        </div>
    </div>

    <!-- Bar Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Bar Chart</h2>
            <p class="text-sm text-muted-foreground">
                A bar chart for comparing values across categories.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Revenue by Product</ChartPanelTitle>
                <ChartPanelDescription>Q1 2024 revenue breakdown</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <BarChart Data="@revenueData" 
                         XAxisDataKey="Product"
                         YAxisDataKey="Revenue"
                         Label="Revenue ($)"
                         Height="300"
                         BarColor="hsl(var(--chart-2))" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Horizontal Bar Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Horizontal Bar Chart</h2>
            <p class="text-sm text-muted-foreground">
                Horizontal orientation for better label readability.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Top Features</ChartPanelTitle>
                <ChartPanelDescription>Most requested features by users</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <BarChart Data="@featureData" 
                         XAxisDataKey="Feature"
                         YAxisDataKey="Requests"
                         Label="Requests"
                         Height="300"
                         Orientation="BarChartOrientation.Horizontal"
                         BarColor="hsl(var(--chart-4))" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Pie Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Pie Chart</h2>
            <p class="text-sm text-muted-foreground">
                Display composition and proportions of categories.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Market Share</ChartPanelTitle>
                <ChartPanelDescription>Browser usage distribution</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@marketShareData" 
                         LabelDataKey="Browser"
                         ValueDataKey="Share"
                         Height="350" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Donut Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Donut Chart</h2>
            <p class="text-sm text-muted-foreground">
                A pie chart variant with a hole in the center, ideal for displaying totals.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Sales by Category</ChartPanelTitle>
                <ChartPanelDescription>Total: $45,000</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <PieChart Data="@categoryData" 
                         LabelDataKey="Category"
                         ValueDataKey="Amount"
                         Height="350"
                         IsDonut="true"
                         DonutInnerRadius="0.65">
                    <CenterContent>
                        <div class="text-center">
                            <div class="text-2xl font-bold">$45K</div>
                            <div class="text-xs text-muted-foreground">Total Sales</div>
                        </div>
                    </CenterContent>
                </PieChart>
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Multi-Series Line Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Multi-Series Line Chart</h2>
            <p class="text-sm text-muted-foreground">
                Display multiple data series on the same chart for comparison.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Performance Metrics</ChartPanelTitle>
                <ChartPanelDescription>Comparing sales vs. target over time</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <MultiSeriesLineChart Data="@performanceData" 
                                     XAxisDataKey="Month"
                                     Series="@lineSeries"
                                     Height="350" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Radar Chart -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Radar Chart</h2>
            <p class="text-sm text-muted-foreground">
                Visualize multivariate data across multiple dimensions.
            </p>
        </div>
        
        <ChartPanel>
            <ChartPanelHeader>
                <ChartPanelTitle>Skills Assessment</ChartPanelTitle>
                <ChartPanelDescription>Comparing team member competencies</ChartPanelDescription>
            </ChartPanelHeader>
            <ChartPanelContent>
                <RadarChart Data="@skillsData" 
                           LabelDataKey="Skill"
                           Series="@radarSeries"
                           Height="400"
                           FillOpacity="0.25" />
            </ChartPanelContent>
        </ChartPanel>
    </div>

    <!-- Engine Selection - ECharts with SVG -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">ECharts Renderer (SVG)</h2>
            <p class="text-sm text-muted-foreground">
                Charts using ECharts renderer with SVG output for high-quality vector graphics and export capabilities.
            </p>
        </div>
        
        <div class="grid gap-4 md:grid-cols-2">
            <ChartPanel>
                <ChartPanelHeader>
                    <ChartPanelTitle>Sales (ECharts)</ChartPanelTitle>
                    <ChartPanelDescription>SVG rendering with ECharts engine</ChartPanelDescription>
                </ChartPanelHeader>
                <ChartPanelContent>
                    <LineChart Data="@salesData" 
                              XAxisDataKey="Month"
                              YAxisDataKey="Sales"
                              Label="Sales ($)"
                              Height="300"
                              Curved="true"
                              Engine="ChartEngine.ECharts" />
                </ChartPanelContent>
            </ChartPanel>
            
            <ChartPanel>
                <ChartPanelHeader>
                    <ChartPanelTitle>Sales (Chart.js)</ChartPanelTitle>
                    <ChartPanelDescription>Canvas rendering with Chart.js (for comparison)</ChartPanelDescription>
                </ChartPanelHeader>
                <ChartPanelContent>
                    <LineChart Data="@salesData" 
                              XAxisDataKey="Month"
                              YAxisDataKey="Sales"
                              Label="Sales ($)"
                              Height="300"
                              Curved="true"
                              Engine="ChartEngine.ChartJs" />
                </ChartPanelContent>
            </ChartPanel>
        </div>
    </div>

    <!-- Usage -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Usage</h2>
            <p class="text-sm text-muted-foreground">
                Basic example of using the LineChart component.
            </p>
        </div>
        <div class="rounded-lg border bg-card p-4">
            <pre class="text-xs bg-muted p-3 rounded overflow-x-auto"><code>@@using BlazorUI.Components.Chart

&lt;ChartPanel&gt;
    &lt;ChartPanelHeader&gt;
        &lt;ChartPanelTitle&gt;Monthly Sales&lt;/ChartPanelTitle&gt;
        &lt;ChartPanelDescription&gt;Sales performance&lt;/ChartPanelDescription&gt;
    &lt;/ChartPanelHeader&gt;
    &lt;ChartPanelContent&gt;
        &lt;LineChart Data="@@salesData" 
                  XAxisDataKey="Month"
                  YAxisDataKey="Sales"
                  Label="Sales ($)"
                  Height="300"
                  Curved="true" /&gt;
    &lt;/ChartPanelContent&gt;
&lt;/ChartPanel&gt;

@@code {
    private List&lt;SalesData&gt; salesData = new()
    {
        new() { Month = "Jan", Sales = 4000 },
        new() { Month = "Feb", Sales = 3000 },
        new() { Month = "Mar", Sales = 5000 },
    };
    
    public class SalesData
    {
        public string Month { get; set; } = "";
        public int Sales { get; set; }
    }
}</code></pre>
        </div>
    </div>

    <!-- Features -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Features</h2>
        </div>
        <div class="space-y-2 text-sm">
            <p>✓ Responsive and adaptive layouts</p>
            <p>✓ Smooth animations with reduced-motion support</p>
            <p>✓ Theme integration with CSS variables (--chart-1 through --chart-5)</p>
            <p>✓ Interactive tooltips and legends</p>
            <p>✓ Multiple chart types: Line, Area, Bar, Pie, Donut, and Radar</p>
            <p>✓ Multi-series support for comparing multiple datasets</p>
            <p>✓ Pluggable rendering engines: Chart.js (Canvas) and ECharts (SVG)</p>
            <p>✓ SVG export support with ECharts renderer</p>
            <p>✓ Curved and straight line styles</p>
            <p>✓ Area fill support for line charts</p>
            <p>✓ Horizontal and vertical bar orientations</p>
            <p>✓ Donut charts with customizable center content</p>
            <p>✓ Customizable colors and styling</p>
            <p>✓ Dynamic data loading from Chart.js CDN</p>
            <p>✓ Generic type support for strongly-typed data</p>
            <p>✓ Proper resource disposal via IAsyncDisposable</p>
        </div>
    </div>
</div>

@code {
    private readonly List<SalesData> salesData = new()
    {
        new() { Month = "Jan", Sales = 4000 },
        new() { Month = "Feb", Sales = 3000 },
        new() { Month = "Mar", Sales = 5000 },
        new() { Month = "Apr", Sales = 4500 },
        new() { Month = "May", Sales = 6000 },
        new() { Month = "Jun", Sales = 5500 }
    };
    
    private readonly List<TrafficData> trafficData = new()
    {
        new() { Day = "Mon", Visitors = 1200 },
        new() { Day = "Tue", Visitors = 1900 },
        new() { Day = "Wed", Visitors = 1500 },
        new() { Day = "Thu", Visitors = 2200 },
        new() { Day = "Fri", Visitors = 2800 },
        new() { Day = "Sat", Visitors = 2400 },
        new() { Day = "Sun", Visitors = 1800 }
    };
    
    private readonly List<RevenueData> revenueData = new()
    {
        new() { Product = "Product A", Revenue = 12000 },
        new() { Product = "Product B", Revenue = 8500 },
        new() { Product = "Product C", Revenue = 15000 },
        new() { Product = "Product D", Revenue = 9200 },
        new() { Product = "Product E", Revenue = 11000 }
    };
    
    private readonly List<FeatureData> featureData = new()
    {
        new() { Feature = "Dark Mode", Requests = 234 },
        new() { Feature = "Export PDF", Requests = 189 },
        new() { Feature = "Multi-language", Requests = 156 },
        new() { Feature = "Mobile App", Requests = 298 },
        new() { Feature = "API Access", Requests = 178 }
    };
    
    private readonly List<MarketShareData> marketShareData = new()
    {
        new() { Browser = "Chrome", Share = 65 },
        new() { Browser = "Safari", Share = 18 },
        new() { Browser = "Firefox", Share = 8 },
        new() { Browser = "Edge", Share = 6 },
        new() { Browser = "Other", Share = 3 }
    };
    
    private readonly List<CategoryData> categoryData = new()
    {
        new() { Category = "Electronics", Amount = 18000 },
        new() { Category = "Clothing", Amount = 12000 },
        new() { Category = "Food", Amount = 8000 },
        new() { Category = "Books", Amount = 4000 },
        new() { Category = "Other", Amount = 3000 }
    };
    
    private readonly List<PerformanceData> performanceData = new()
    {
        new() { Month = "Jan", Sales = 4000, Target = 4500, Profit = 1200 },
        new() { Month = "Feb", Sales = 3000, Target = 4500, Profit = 900 },
        new() { Month = "Mar", Sales = 5000, Target = 4500, Profit = 1500 },
        new() { Month = "Apr", Sales = 4500, Target = 4500, Profit = 1350 },
        new() { Month = "May", Sales = 6000, Target = 4500, Profit = 1800 },
        new() { Month = "Jun", Sales = 5500, Target = 4500, Profit = 1650 }
    };
    
    private readonly List<SkillsData> skillsData = new()
    {
        new() { Skill = "JavaScript", Developer1 = 90, Developer2 = 75 },
        new() { Skill = "C#", Developer1 = 85, Developer2 = 95 },
        new() { Skill = "Design", Developer1 = 70, Developer2 = 80 },
        new() { Skill = "Testing", Developer1 = 80, Developer2 = 70 },
        new() { Skill = "DevOps", Developer1 = 75, Developer2 = 85 }
    };
    
    private readonly List<ChartSeriesConfig> lineSeries = new()
    {
        new() { DataKey = "Sales", Label = "Actual Sales", Curved = true, Color = "hsl(var(--chart-1))" },
        new() { DataKey = "Target", Label = "Target", Curved = true, Dashed = true, Color = "hsl(var(--chart-2))" },
        new() { DataKey = "Profit", Label = "Profit", Curved = true, Color = "hsl(var(--chart-3))" }
    };
    
    private readonly List<RadarSeriesConfig> radarSeries = new()
    {
        new() { DataKey = "Developer1", Label = "Developer A", Color = "hsl(var(--chart-1))" },
        new() { DataKey = "Developer2", Label = "Developer B", Color = "hsl(var(--chart-2))" }
    };
    
    public class SalesData
    {
        public string Month { get; set; } = "";
        public int Sales { get; set; }
    }
    
    public class TrafficData
    {
        public string Day { get; set; } = "";
        public int Visitors { get; set; }
    }
    
    public class RevenueData
    {
        public string Product { get; set; } = "";
        public int Revenue { get; set; }
    }
    
    public class FeatureData
    {
        public string Feature { get; set; } = "";
        public int Requests { get; set; }
    }
    
    public class MarketShareData
    {
        public string Browser { get; set; } = "";
        public int Share { get; set; }
    }
    
    public class CategoryData
    {
        public string Category { get; set; } = "";
        public int Amount { get; set; }
    }
    
    public class PerformanceData
    {
        public string Month { get; set; } = "";
        public int Sales { get; set; }
        public int Target { get; set; }
        public int Profit { get; set; }
    }
    
    public class SkillsData
    {
        public string Skill { get; set; } = "";
        public int Developer1 { get; set; }
        public int Developer2 { get; set; }
    }
}
