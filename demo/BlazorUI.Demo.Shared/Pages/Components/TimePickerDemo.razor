@page "/components/time-picker"
@using BlazorUI.Components.TimePicker
@using BlazorUI.Components.Field
@using System.ComponentModel.DataAnnotations

<PageTitle>TimePicker Component - BlazorUI</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">TimePicker Component</h1>
            <p class="text-xl text-muted-foreground">
                Time selection with hour, minute, and optional second selectors. Supports both 12-hour and 24-hour formats.
            </p>
        </div>
    </div>

    <div class="space-y-6">
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Default (24-Hour)</h2>
                <p class="text-muted-foreground">
                    A basic time picker with 24-hour format.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime1" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(selectedTime1?.ToString(@"hh\:mm") ?? "None")
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">12-Hour Format</h2>
                <p class="text-muted-foreground">
                    Time picker with 12-hour format and AM/PM selector.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime2"
                               Use12Hour="true" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(FormatTime12Hour(selectedTime2))
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">With Seconds</h2>
                <p class="text-muted-foreground">
                    Time picker with seconds selector enabled.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime3"
                               ShowSeconds="true" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(selectedTime3?.ToString(@"hh\:mm\:ss") ?? "None")
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">15-Minute Intervals</h2>
                <p class="text-muted-foreground">
                    Restrict minute selection to 15-minute intervals.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime4"
                               Step="15"
                               Placeholder="Select time (15 min steps)" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(selectedTime4?.ToString(@"hh\:mm") ?? "None")
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">30-Minute Intervals</h2>
                <p class="text-muted-foreground">
                    Restrict minute selection to 30-minute intervals.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime5"
                               Step="30"
                               Use12Hour="true"
                               Placeholder="Select time (30 min steps)" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(FormatTime12Hour(selectedTime5))
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Time Range Constraints</h2>
                <p class="text-muted-foreground">
                    Time picker with minimum and maximum time constraints (9 AM - 5 PM).
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime6"
                               MinTime="@(new TimeSpan(9, 0, 0))"
                               MaxTime="@(new TimeSpan(17, 0, 0))"
                               Use12Hour="true"
                               Placeholder="Business hours only" />
                </div>
                <p class="text-sm text-muted-foreground">
                    Selected: @(FormatTime12Hour(selectedTime6))
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">In a Form</h2>
                <p class="text-muted-foreground">
                    TimePicker integrated with form fields.
                </p>
            </div>

            <div class="flex flex-col gap-4 max-w-sm">
                <Field>
                    <FieldLabel>Appointment Time</FieldLabel>
                    <TimePicker @bind-Time="appointmentTime"
                               Step="15"
                               Use12Hour="true"
                               Placeholder="Select appointment time" />
                    <FieldDescription>Select your preferred appointment time.</FieldDescription>
                </Field>
                <p class="text-sm text-muted-foreground">
                    Selected: @(FormatTime12Hour(appointmentTime))
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Meeting Schedule</h2>
                <p class="text-muted-foreground">
                    Multiple time pickers for meeting start and end times.
                </p>
            </div>

            <div class="flex flex-col gap-4 max-w-sm">
                <Field>
                    <FieldLabel>Meeting Start</FieldLabel>
                    <TimePicker @bind-Time="meetingStart"
                               Step="15"
                               Placeholder="Start time" />
                </Field>
                <Field>
                    <FieldLabel>Meeting End</FieldLabel>
                    <TimePicker @bind-Time="meetingEnd"
                               Step="15"
                               Placeholder="End time" />
                </Field>
                <p class="text-sm text-muted-foreground">
                    Duration:
                    @if (meetingStart.HasValue && meetingEnd.HasValue)
                    {
                        var duration = meetingEnd.Value - meetingStart.Value;
                        <span class="font-medium">@((int)duration.TotalHours) hours @duration.Minutes minutes</span>
                    }
                    else
                    {
                        <span>Select both times</span>
                    }
                </p>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Disabled State</h2>
                <p class="text-muted-foreground">
                    A disabled time picker.
                </p>
            </div>

            <div class="flex flex-col gap-4">
                <div>
                    <TimePicker @bind-Time="selectedTime7"
                               Disabled="true"
                               Placeholder="Disabled picker" />
                </div>
            </div>
        </section>
    </div>
</div>

@code {
    private TimeSpan? selectedTime1;
    private TimeSpan? selectedTime2;
    private TimeSpan? selectedTime3;
    private TimeSpan? selectedTime4;
    private TimeSpan? selectedTime5;
    private TimeSpan? selectedTime6;
    private TimeSpan? selectedTime7;
    private TimeSpan? appointmentTime;
    private TimeSpan? meetingStart;
    private TimeSpan? meetingEnd;

    private string FormatTime12Hour(TimeSpan? time)
    {
        if (!time.HasValue)
            return "None";

        var t = time.Value;
        var hour = t.Hours % 12;
        if (hour == 0) hour = 12;
        var period = t.Hours >= 12 ? "PM" : "AM";
        return $"{hour}:{t.Minutes:D2} {period}";
    }
}
