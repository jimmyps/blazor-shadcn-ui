@page "/components/range-slider"
@using BlazorUI.Components.RangeSlider
@using BlazorUI.Components.Label
@using BlazorUI.Components.Card
@using BlazorUI.Components.Button
@using Microsoft.AspNetCore.Components.Forms

<PageTitle>RangeSlider Component - BlazorUI</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">RangeSlider Component</h1>
            <p class="text-xl text-muted-foreground">
                A dual-handle slider for selecting a range of values with keyboard support, tooltips, and full accessibility.
            </p>
        </div>
    </div>

    <!-- Basic Range Slider -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic</h2>
            <p class="text-sm text-muted-foreground">
                A simple range slider with default settings (0-100).
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="basicMin" @bind-MaxValue="basicMax" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@basicMin - @basicMax</span>
            </div>
        </div>
    </div>

    <!-- Price Range -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Price Range</h2>
            <p class="text-sm text-muted-foreground">
                Custom range with step increments for price selection.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="priceMin" 
                        @bind-MaxValue="priceMax"
                        Min="0"
                        Max="1000"
                        Step="10"
                        ShowTooltips="true"
                        ShowLabels="true" />
            <div class="text-sm text-muted-foreground">
                Price range: <span class="font-medium text-foreground">$@priceMin - $@priceMax</span>
            </div>
        </div>
    </div>

    <!-- Age Range -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Age Range</h2>
            <p class="text-sm text-muted-foreground">
                Age selector with custom min/max values.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="ageMin" 
                        @bind-MaxValue="ageMax"
                        Min="18"
                        Max="100"
                        Step="1"
                        ShowTooltips="true"
                        ShowLabels="true"
                        AriaLabel="Age range selector" />
            <div class="text-sm text-muted-foreground">
                Age range: <span class="font-medium text-foreground">@ageMin - @ageMax years</span>
            </div>
        </div>
    </div>

    <!-- With Tick Marks -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">With Tick Marks</h2>
            <p class="text-sm text-muted-foreground">
                Range slider with visible tick marks at specified intervals.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="tickMin" 
                        @bind-MaxValue="tickMax"
                        Min="0"
                        Max="100"
                        Step="5"
                        ShowTicks="true"
                        TickInterval="25"
                        ShowTooltips="true"
                        ShowLabels="true" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@tickMin - @tickMax</span>
            </div>
        </div>
    </div>

    <!-- Without Tooltips -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Without Tooltips</h2>
            <p class="text-sm text-muted-foreground">
                Range slider with tooltips disabled.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="noTooltipMin" 
                        @bind-MaxValue="noTooltipMax"
                        ShowTooltips="false"
                        ShowLabels="true" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@noTooltipMin - @noTooltipMax</span>
            </div>
        </div>
    </div>

    <!-- Without Labels -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Without Labels</h2>
            <p class="text-sm text-muted-foreground">
                Range slider with min/max labels hidden.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="noLabelMin" 
                        @bind-MaxValue="noLabelMax"
                        ShowLabels="false"
                        ShowTooltips="true" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@noLabelMin - @noLabelMax</span>
            </div>
        </div>
    </div>

    <!-- Decimal Steps -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Decimal Steps</h2>
            <p class="text-sm text-muted-foreground">
                Range slider with decimal step values for precise selection.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="decimalMin" 
                        @bind-MaxValue="decimalMax"
                        Min="0"
                        Max="10"
                        Step="0.5"
                        ShowTooltips="true"
                        ShowLabels="true" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@decimalMin.ToString("F1") - @decimalMax.ToString("F1")</span>
            </div>
        </div>
    </div>

    <!-- Vertical Orientation -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Vertical Orientation</h2>
            <p class="text-sm text-muted-foreground">
                Range slider in vertical orientation.
            </p>
        </div>
        <div class="flex gap-8 items-start">
            <div class="space-y-4">
                <RangeSlider @bind-MinValue="verticalMin" 
                            @bind-MaxValue="verticalMax"
                            Orientation="SliderOrientation.Vertical"
                            ShowTooltips="true"
                            ShowLabels="true" />
            </div>
            <div class="text-sm text-muted-foreground flex-1">
                Selected range: <span class="font-medium text-foreground">@verticalMin - @verticalMax</span>
            </div>
        </div>
    </div>

    <!-- Disabled State -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Disabled State</h2>
            <p class="text-sm text-muted-foreground">
                Range slider in disabled state cannot be interacted with.
            </p>
        </div>
        <div class="space-y-4">
            <RangeSlider @bind-MinValue="disabledMin" 
                        @bind-MaxValue="disabledMax"
                        Disabled="true"
                        ShowTooltips="true"
                        ShowLabels="true" />
            <div class="text-sm text-muted-foreground">
                Selected range: <span class="font-medium text-foreground">@disabledMin - @disabledMax</span>
            </div>
        </div>
    </div>

    <!-- Form Integration -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Form Integration</h2>
            <p class="text-sm text-muted-foreground">
                Range slider integrated with Blazor's EditForm for validation.
            </p>
        </div>
        <Card>
            <div class="p-6">
                <EditForm Model="@formModel" OnValidSubmit="HandleValidSubmit">
                    <DataAnnotationsValidator />
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <Label>Budget Range (Required: $200-$800)</Label>
                            <RangeSlider @bind-MinValue="formModel.BudgetMin" 
                                        @bind-MaxValue="formModel.BudgetMax"
                                        Min="0"
                                        Max="1000"
                                        Step="50"
                                        ShowTooltips="true"
                                        ShowLabels="true"
                                        Name="budget" />
                            <div class="text-sm text-muted-foreground">
                                Selected: <span class="font-medium text-foreground">$@formModel.BudgetMin - $@formModel.BudgetMax</span>
                            </div>
                            <ValidationMessage For="@(() => formModel.BudgetMin)" />
                            <ValidationMessage For="@(() => formModel.BudgetMax)" />
                        </div>
                        <Button Type="ButtonType.Submit">Submit</Button>
                        @if (!string.IsNullOrEmpty(formSubmitMessage))
                        {
                            <div class="text-sm text-green-600 dark:text-green-400">@formSubmitMessage</div>
                        }
                    </div>
                </EditForm>
            </div>
        </Card>
    </div>

    <!-- Keyboard Navigation -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Keyboard Navigation</h2>
            <p class="text-sm text-muted-foreground">
                Use keyboard to control the slider handles.
            </p>
        </div>
        <Card>
            <div class="p-6 space-y-4">
                <div class="space-y-2">
                    <ul class="text-sm space-y-1 list-disc list-inside text-muted-foreground">
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">Tab</kbd> - Focus handles</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">←</kbd> <kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">↓</kbd> - Decrease value</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">→</kbd> <kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">↑</kbd> - Increase value</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">Page Up</kbd> - Increase by 10 steps</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">Page Down</kbd> - Decrease by 10 steps</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">Home</kbd> - Jump to minimum</li>
                        <li><kbd class="px-2 py-1 text-xs font-semibold bg-muted rounded">End</kbd> - Jump to maximum</li>
                    </ul>
                </div>
                <RangeSlider @bind-MinValue="keyboardMin" 
                            @bind-MaxValue="keyboardMax"
                            ShowTooltips="true"
                            ShowLabels="true" />
                <div class="text-sm text-muted-foreground">
                    Selected range: <span class="font-medium text-foreground">@keyboardMin - @keyboardMax</span>
                </div>
            </div>
        </Card>
    </div>
</div>

@code {
    // Basic
    private double basicMin = 25;
    private double basicMax = 75;

    // Price range
    private double priceMin = 200;
    private double priceMax = 600;

    // Age range
    private double ageMin = 25;
    private double ageMax = 45;

    // With tick marks
    private double tickMin = 25;
    private double tickMax = 75;

    // Without tooltips
    private double noTooltipMin = 30;
    private double noTooltipMax = 70;

    // Without labels
    private double noLabelMin = 40;
    private double noLabelMax = 80;

    // Decimal steps
    private double decimalMin = 2.5;
    private double decimalMax = 7.5;

    // Vertical
    private double verticalMin = 30;
    private double verticalMax = 70;

    // Disabled
    private double disabledMin = 35;
    private double disabledMax = 65;

    // Keyboard
    private double keyboardMin = 20;
    private double keyboardMax = 80;

    // Form integration
    private BudgetFormModel formModel = new()
    {
        BudgetMin = 300,
        BudgetMax = 700
    };
    private string formSubmitMessage = "";

    private void HandleValidSubmit()
    {
        formSubmitMessage = $"Form submitted successfully! Budget: ${formModel.BudgetMin} - ${formModel.BudgetMax}";
    }

    public class BudgetFormModel
    {
        [System.ComponentModel.DataAnnotations.Range(200, 1000, ErrorMessage = "Minimum budget must be between $200 and $1000")]
        public double BudgetMin { get; set; }

        [System.ComponentModel.DataAnnotations.Range(200, 1000, ErrorMessage = "Maximum budget must be between $200 and $1000")]
        public double BudgetMax { get; set; }
    }
}
