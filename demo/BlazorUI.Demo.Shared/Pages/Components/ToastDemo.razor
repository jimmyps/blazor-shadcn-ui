@page "/components/toast"
@using BlazorUI.Components.Toast
@inject IToastService ToastService

<PageTitle>Toast Component - BlazorUI</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Toast Component</h1>
            <p class="text-xl text-muted-foreground">
                A succinct message that is displayed temporarily. Also known as notifications or snackbars.
            </p>
        </div>
    </div>

    <div class="space-y-6">
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Default Toast</h2>
                <p class="text-muted-foreground">
                    Show a simple toast notification.
                </p>
            </div>

            <Button Variant="ButtonVariant.Outline" @onclick="ShowDefaultToast">Show Toast</Button>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Toast with Action</h2>
                <p class="text-muted-foreground">
                    Include an action button in the toast.
                </p>
            </div>

            <Button Variant="ButtonVariant.Outline" @onclick="ShowToastWithAction">
                Show with Action
            </Button>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Custom Duration</h2>
                <p class="text-muted-foreground">
                    Control how long the toast stays visible.
                </p>
            </div>

            <div class="flex gap-2">
                <Button Variant="ButtonVariant.Outline" @onclick="ShowShortToast">
                    Short (2s)
                </Button>
                <Button Variant="ButtonVariant.Outline" @onclick="ShowLongToast">
                    Long (10s)
                </Button>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Multiple Toasts</h2>
                <p class="text-muted-foreground">
                    Toasts stack automatically.
                </p>
            </div>

            <Button Variant="ButtonVariant.Outline" @onclick="ShowMultipleToasts">
                Show Multiple Toasts
            </Button>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Dismiss All</h2>
                <p class="text-muted-foreground">
                    Clear all active toasts.
                </p>
            </div>

            <Button Variant="ButtonVariant.Outline" @onclick="DismissAllToasts">
                Dismiss All
            </Button>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Toast Variants</h2>
            </div>
            <div class="grid gap-4 p-4 border rounded-lg">
                <div class="flex gap-2 flex-wrap">
                    <Button Size="ButtonSize.Small" @onclick="ShowDefaultToast">Default</Button>
                    <Button Size="ButtonSize.Small" Class="bg-green-600 hover:bg-green-700" @onclick="ShowSuccessToast">Success</Button>
                    <Button Size="ButtonSize.Small" Variant="ButtonVariant.Destructive" @onclick="ShowErrorToast">Error</Button>
                    <Button Size="ButtonSize.Small" Class="bg-yellow-500 hover:bg-yellow-600" @onclick="ShowWarningToast">Warning</Button>
                    <Button Size="ButtonSize.Small" Class="bg-blue-500 hover:bg-blue-600" @onclick="ShowInfoToast">Info</Button>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Toast Sizes</h2>
                <p class="text-muted-foreground">
                    Choose between default and compact sizes.
                </p>
            </div>

            <div class="flex gap-2">
                <Button Variant="ButtonVariant.Outline" @onclick="ShowDefaultSizeToast">
                    Default Size
                </Button>
                <Button Variant="ButtonVariant.Outline" @onclick="ShowCompactSizeToast">
                    Compact Size
                </Button>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Variant Icons</h2>
                <p class="text-muted-foreground">
                    Toasts automatically show icons based on variant. You can disable them if needed.
                </p>
            </div>

            <div class="flex gap-2 flex-wrap">
                <Button Variant="ButtonVariant.Outline" @onclick="ShowToastWithIcon">
                    With Icon (Default)
                </Button>
                <Button Variant="ButtonVariant.Outline" @onclick="ShowToastWithoutIcon">
                    Without Icon
                </Button>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Pause on Hover</h2>
                <p class="text-muted-foreground">
                    Toasts pause auto-dismiss when you hover over them. Try hovering to read the message!
                </p>
            </div>

            <div class="flex gap-2">
                <Button Variant="ButtonVariant.Outline" @onclick="ShowPauseableToast">
                    Show with Pause (Default)
                </Button>
                <Button Variant="ButtonVariant.Outline" @onclick="ShowNonPauseableToast">
                    Show without Pause
                </Button>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Advanced Customization</h2>
                <p class="text-muted-foreground">
                    Combine multiple options for granular control.
                </p>
            </div>

            <Button Variant="ButtonVariant.Outline" @onclick="ShowCustomizedToast">
                Show Customized Toast
            </Button>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Features</h2>
            </div>
            <ul class="list-disc list-inside space-y-2 text-sm">
                <li>Multiple variants: Default, Success, Warning, Error, Info</li>
                <li>Two sizes: Default and Compact</li>
                <li>Auto variant icons (Success ✓, Error ✗, Warning ⚠, Info ℹ)</li>
                <li>Pause on hover (prevents auto-dismiss while reading)</li>
                <li>Programmatic API via IToastService</li>
                <li>Auto-dismiss with configurable duration</li>
                <li>Optional action buttons</li>
                <li>Toast stacking with MaxToasts limit</li>
                <li>Configurable viewport position</li>
                <li>Accessible with ARIA live regions</li>
            </ul>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Setup</h2>
            </div>

            <div class="space-y-4">
                <p class="text-sm text-muted-foreground">1. Register the service in Program.cs:</p>
                <div class="bg-muted p-4 rounded-md">
                    <code class="text-sm">builder.Services.AddSingleton&lt;IToastService, ToastService&gt;();</code>
                </div>

                <p class="text-sm text-muted-foreground">2. Add ToastProvider to your layout:</p>
                <div class="bg-muted p-4 rounded-md">
                    <pre class="text-sm overflow-x-auto"><code>&lt;ToastProvider Position="ToastPosition.BottomRight"&gt;
    @@Body
&lt;/ToastProvider&gt;</code></pre>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Installation</h2>
            </div>

            <div class="bg-muted p-4 rounded-md">
                <code class="text-sm">@@using BlazorUI.Components.Toast</code>
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Usage</h2>
            </div>

            <div class="bg-muted p-4 rounded-md">
                <pre class="text-sm overflow-x-auto"><code>@@inject IToastService Toasts

&lt;Button @@onclick="ShowToast"&gt;Show Toast&lt;/Button&gt;

@@code {
    // Simple usage with service methods
    private void ShowToast()
    {
        Toasts.Success("Saved!", "Your changes have been saved.");
    }

    // Using static factory methods
    private void ShowWithFactory()
    {
        Toasts.Show(ToastOptions.Success("Saved!", "Your changes have been saved."));
    }

    // Compact toast for dialogs
    private void ShowInDialog()
    {
        Toasts.Show(ToastOptions.Compact(
            "Changes saved",
            "Your profile has been updated",
            ToastVariant.Success,
            ToastPosition.BottomCenter
        ));
    }

    // With action button
    private void ShowWithAction()
    {
        Toasts.Show(new ToastOptions
        {
            Title = "Event scheduled",
            Description = "Your meeting has been scheduled.",
            ActionLabel = "Undo",
            OnAction = () => Console.WriteLine("Undo clicked!")
        });
    }

    // Advanced customization
    private void ShowCustomized()
    {
        Toasts.Show(new ToastOptions
        {
            Title = "Custom Toast",
            Description = "Fully customized with all options.",
            Variant = ToastVariant.Success,
            Size = ToastSize.Compact,
            ShowIcon = true,
            PauseOnHover = true,
            Duration = TimeSpan.FromSeconds(8)
        });
    }
}</code></pre>
            </div>
        </section>
    </div>
</div>

@code {
    private void ShowDefaultToast()
    {
        ToastService.Show("Notification", "This is a default toast message.");
    }

    private void ShowSuccessToast()
    {
        ToastService.Success("Success!", "Your changes have been saved successfully.");
    }

    private void ShowErrorToast()
    {
        ToastService.Error("Error", "Something went wrong. Please try again.");
    }

    private void ShowWarningToast()
    {
        ToastService.Warning("Warning", "This action cannot be undone.");
    }

    private void ShowInfoToast()
    {
        ToastService.Info("Did you know?", "You can customize the toast duration.");
    }

    private void ShowToastWithAction()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Event scheduled",
            Description = "Your meeting has been scheduled for tomorrow at 10 AM.",
            Variant = ToastVariant.Default,
            ActionLabel = "Undo",
            OnAction = () => ToastService.Info("Undone", "The event has been cancelled."),
            Duration = TimeSpan.FromSeconds(8)
        });
    }

    private void ShowShortToast()
    {
        ToastService.Show("Quick message", "This disappears in 2 seconds.", ToastVariant.Default, TimeSpan.FromSeconds(2));
    }

    private void ShowLongToast()
    {
        ToastService.Show("Long message", "This stays for 10 seconds.", ToastVariant.Default, TimeSpan.FromSeconds(10));
    }

    private void ShowMultipleToasts()
    {
        ToastService.Info("First", "This is the first toast.");
        ToastService.Success("Second", "This is the second toast.");
        ToastService.Warning("Third", "This is the third toast.");
    }

    private void DismissAllToasts()
    {
        ToastService.DismissAll();
    }

    // New feature demos
    private void ShowDefaultSizeToast()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Default Size",
            Description = "This toast uses the default size with normal padding.",
            Variant = ToastVariant.Success,
            Size = ToastSize.Default
        });
    }

    private void ShowCompactSizeToast()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Compact Size",
            Description = "This toast uses compact size with reduced padding for denser UI.",
            Variant = ToastVariant.Info,
            Size = ToastSize.Compact
        });
    }

    private void ShowToastWithIcon()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "With Icon",
            Description = "Icons are shown by default based on the variant.",
            Variant = ToastVariant.Success,
            ShowIcon = true  // Default behavior
        });
    }

    private void ShowToastWithoutIcon()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Without Icon",
            Description = "You can disable the icon if needed.",
            Variant = ToastVariant.Warning,
            ShowIcon = false
        });
    }

    private void ShowPauseableToast()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Pause on Hover",
            Description = "Hover over this toast and it will pause the auto-dismiss timer! Move your mouse away and it will resume counting down.",
            Variant = ToastVariant.Info,
            PauseOnHover = true,  // Default behavior
            Duration = TimeSpan.FromSeconds(5)
        });
    }

    private void ShowNonPauseableToast()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "No Pause",
            Description = "This toast will auto-dismiss even if you hover over it.",
            Variant = ToastVariant.Warning,
            PauseOnHover = false,
            Duration = TimeSpan.FromSeconds(5)
        });
    }

    private void ShowCustomizedToast()
    {
        ToastService.Show(new ToastOptions
        {
            Title = "Fully Customized",
            Description = "This toast combines compact size, custom icon setting, pause on hover, and action button.",
            Variant = ToastVariant.Success,
            Size = ToastSize.Compact,
            ShowIcon = true,
            PauseOnHover = true,
            ActionLabel = "View Details",
            OnAction = () => ToastService.Info("Details", "Action button clicked!"),
            Duration = TimeSpan.FromSeconds(8)
        });
    }
}

