@page "/components/filter"
@using BlazorUI.Components.Filter
@using BlazorUI.Components.Card
@using BlazorUI.Components.Button

<PageTitle>Filter Builder Component - BlazorUI</PageTitle>

<div class="space-y-8 max-w-7xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Filter Builder Component</h1>
            <p class="text-xl text-muted-foreground">
                A flexible and declarative filter builder system with support for multiple field types, custom controls, and filter presets.
            </p>
        </div>
    </div>

    <!-- Features Overview -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Features</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <Card>
                <CardHeader>
                    <CardTitle>8 Field Types</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Text, Number, Date, DateRange, Boolean, Select, MultiSelect, and Custom controls.
                    </p>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Declarative API</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Define filter fields using child content with FilterField components.
                    </p>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Filter Presets</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Create reusable filter configurations with icons and descriptions.
                    </p>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>LINQ Extensions</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Apply filters to IEnumerable collections with ApplyFilters() extension.
                    </p>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Two-Way Binding</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Use @@bind-Filters for seamless state management.
                    </p>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Mobile Responsive</CardTitle>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground">
                        Popover-based UI that adapts to different screen sizes.
                    </p>
                </CardContent>
            </Card>
        </div>
    </div>

    <!-- Examples Navigation -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Examples</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Card>
                <CardHeader>
                    <CardTitle>Basic Example</CardTitle>
                    <CardDescription>Simple product filtering with common fields</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Learn the basics of FilterBuilder with a simple product catalog example.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/basic"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>All Field Types</CardTitle>
                    <CardDescription>Showcase all 8 supported field types</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Explore all available field types and their operators.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/all-types"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Custom Controls</CardTitle>
                    <CardDescription>Use RenderFragment for custom inputs</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Create custom filter controls like sliders and rating inputs.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/custom"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Filter Presets</CardTitle>
                    <CardDescription>Reusable filter configurations</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Create quick-access presets for common filter scenarios.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/presets"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>State Persistence</CardTitle>
                    <CardDescription>Save and restore filter state</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Persist filters to localStorage for a better user experience.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/persistence"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
            
            <Card>
                <CardHeader>
                    <CardTitle>Nested Groups</CardTitle>
                    <CardDescription>Complex AND/OR logic</CardDescription>
                </CardHeader>
                <CardContent>
                    <p class="text-sm text-muted-foreground mb-4">
                        Build advanced filters with nested condition groups.
                    </p>
                    <Button Variant="ButtonVariant.Outline" OnClick="@(() => NavigateTo("/components/filter/nested"))">
                        View Example
                    </Button>
                </CardContent>
            </Card>
        </div>
    </div>

    <!-- Quick Start -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Quick Start</h2>
        <div class="bg-muted p-6 rounded-lg">
            <pre class="text-sm overflow-x-auto"><code>@@using BlazorUI.Components.Filter

&lt;FilterBuilder TData="Product" 
               @@bind-Filters="activeFilters"
               OnFilterChange="HandleFilterChange"&gt;
    &lt;FilterFields&gt;
        &lt;FilterField Field="Name" 
                     Label="Product Name" 
                     Type="FilterFieldType.Text" /&gt;
        
        &lt;FilterField Field="Price" 
                     Label="Price" 
                     Type="FilterFieldType.Number" /&gt;
        
        &lt;FilterField Field="Category" 
                     Label="Category" 
                     Type="FilterFieldType.Select"
                     Options="@@categoryOptions" /&gt;
    &lt;/FilterFields&gt;
&lt;/FilterBuilder&gt;

@@code {
    private FilterGroup activeFilters = new();
    private List&lt;Product&gt; filteredProducts = new();
    
    private void HandleFilterChange(FilterGroup filters)
    {
        filteredProducts = allProducts.ApplyFilters(filters).ToList();
    }
}</code></pre>
        </div>
    </div>
</div>

@code {
    [Inject] private NavigationManager? NavigationManager { get; set; }
    
    private void NavigateTo(string url)
    {
        NavigationManager?.NavigateTo(url);
    }
}
